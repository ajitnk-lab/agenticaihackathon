<!DOCTYPE html>
<html>
<head>
    <title>Security ROI Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=3.0, user-scalable=yes">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { font-size: 20px; }
        body { font-family: Arial, sans-serif; background: #f5f7fa; font-size: 1rem; line-height: 1.5; }
        
        .header { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            color: white; padding: 2rem; text-align: center; 
        }
        .header h1 { font-size: 2.5rem; margin-bottom: 0.5rem; }
        .header p { font-size: 1.2rem; }
        
        .nav { 
            display: flex; justify-content: center; gap: 1rem; 
            padding: 1.5rem; background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1); 
            flex-wrap: wrap;
        }
        .nav-btn { 
            padding: 1rem 1.5rem; border: none; border-radius: 0.5rem; 
            background: #4f46e5; color: white; cursor: pointer; 
            font-size: 1rem; font-weight: bold; transition: all 0.3s; 
            min-width: 120px;
        }
        .nav-btn:hover { background: #3730a3; transform: translateY(-2px); }
        .nav-btn.active { background: #059669; }
        
        .container { max-width: 1200px; margin: 0 auto; padding: 2rem; }
        
        .metrics { 
            display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); 
            gap: 1.5rem; margin: 2rem 0; 
        }
        .metric-card { 
            background: white; padding: 2rem; border-radius: 0.75rem; 
            box-shadow: 0 4px 8px rgba(0,0,0,0.1); text-align: center; 
            cursor: pointer; transition: all 0.3s; 
        }
        .metric-card:hover { transform: translateY(-4px); box-shadow: 0 8px 16px rgba(0,0,0,0.15); }
        .metric-value { font-size: 3rem; font-weight: bold; color: #4f46e5; margin: 1rem 0; }
        .metric-label { font-size: 1.25rem; font-weight: bold; margin-bottom: 0.5rem; }
        .metric-desc { color: #666; font-size: 1rem; }
        
        .chart-container { 
            background: white; padding: 2rem; border-radius: 0.75rem; 
            box-shadow: 0 4px 8px rgba(0,0,0,0.1); margin: 1.5rem 0; 
        }
        .chart-title { font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem; }
        
        .drill-down { 
            background: white; padding: 2rem; border-radius: 0.75rem; 
            box-shadow: 0 4px 8px rgba(0,0,0,0.1); margin: 1.5rem 0; 
        }
        .service-card { 
            background: #f8fafc; padding: 1.5rem; margin: 1rem 0; 
            border-radius: 0.5rem; cursor: pointer; border-left: 4px solid #4f46e5; 
            transition: all 0.3s; position: relative;
        }
        .service-card:hover { background: #e2e8f0; transform: translateX(4px); }
        .service-name { font-size: 1.25rem; font-weight: bold; margin-bottom: 0.5rem; }
        .service-stats { display: flex; justify-content: space-between; font-size: 1rem; }
        
        .loading-indicator {
            position: absolute; right: 1.5rem; top: 50%; transform: translateY(-50%);
            display: none; color: #4f46e5; font-weight: bold; font-size: 1rem;
        }
        
        .spinner {
            display: inline-block; width: 20px; height: 20px; border: 3px solid #f3f3f3;
            border-top: 3px solid #4f46e5; border-radius: 50%; animation: spin 1s linear infinite;
            margin-right: 0.5rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .tool-response { 
            background: #1f2937; color: #f9fafb; padding: 1.5rem; 
            border-radius: 0.5rem; margin: 1rem 0; font-family: monospace; 
            font-size: 0.9rem; max-height: 300px; overflow-y: auto; 
        }
        
        .hidden { display: none; }
        .section { display: block; }
        .section.hidden { display: none; }
        
        .status-indicator {
            background: #d1fae5; color: #065f46; padding: 1.5rem; 
            border-radius: 0.5rem; margin: 1rem 0; text-align: center; 
            font-weight: bold; font-size: 1rem;
        }

        h3 { font-size: 1.5rem; margin-bottom: 1rem; }
        
        @media (max-width: 768px) {
            html { font-size: 18px; }
            .container { padding: 1rem; }
            .metrics { grid-template-columns: 1fr; }
            .nav { flex-direction: column; align-items: center; }
        }
    
        .recommendation-card {
            background: white; padding: 1.5rem; margin: 1rem 0; 
            border-radius: 0.75rem; border-left: 6px solid #4f46e5;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1); transition: all 0.3s;
        }
        .recommendation-card:hover { transform: translateY(-2px); box-shadow: 0 8px 16px rgba(0,0,0,0.15); }
        
        .recommendation-card.critical { border-left-color: #dc2626; }
        .recommendation-card.high { border-left-color: #ea580c; }
        .recommendation-card.medium { border-left-color: #d97706; }
        .recommendation-card.low { border-left-color: #65a30d; }
        .recommendation-card.cost { border-left-color: #059669; }
        
        .rec-header { display: flex; justify-content: space-between; margin-bottom: 0.75rem; }
        .priority { 
            padding: 0.25rem 0.75rem; border-radius: 1rem; font-size: 0.75rem; 
            font-weight: bold; text-transform: uppercase;
        }
        .priority.critical { background: #fee2e2; color: #991b1b; }
        .priority.high { background: #fed7aa; color: #9a3412; }
        .priority.medium { background: #fef3c7; color: #92400e; }
        .priority.low { background: #dcfce7; color: #166534; }
        .priority.cost { background: #d1fae5; color: #065f46; }
        
        .service { 
            background: #f3f4f6; color: #374151; padding: 0.25rem 0.75rem; 
            border-radius: 1rem; font-size: 0.75rem; font-weight: bold;
        }
        
        .rec-title { font-size: 1.25rem; font-weight: bold; margin-bottom: 0.5rem; color: #1f2937; }
        .rec-desc { color: #6b7280; margin-bottom: 1rem; line-height: 1.5; }
        .rec-impact { color: #059669; font-weight: bold; font-size: 0.9rem; margin-top: 0.75rem; }
        
        .rec-actions { display: flex; gap: 0.75rem; margin: 1rem 0; flex-wrap: wrap; }
        .action-btn {
            padding: 0.75rem 1.5rem; border: none; border-radius: 0.5rem;
            font-weight: bold; cursor: pointer; transition: all 0.3s;
        }
        .action-btn.primary { background: #4f46e5; color: white; }
        .action-btn.primary:hover { background: #3730a3; }
        .action-btn.secondary { background: #f3f4f6; color: #374151; }
        .action-btn.secondary:hover { background: #e5e7eb; }
        
        .action-status {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: white; padding: 2rem; border-radius: 0.75rem;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3); z-index: 1000;
        }
        .status-content { display: flex; align-items: center; gap: 1rem; }
    </style>
</head>
<body>
    <div class="header">
        <h1>Security ROI Dashboard</h1>
        <p>Interactive AWS Security Analysis with AgentCore Memory</p>
        <small>Runtime: well_architected_security_comprehensive-YfJAys5DsJ</small>
    </div>

    <div class="nav">
        <button class="nav-btn active" onclick="switchSection('overview')">Overview</button>
        <button class="nav-btn" onclick="switchSection('security')">Security Drill-Down</button>
        <button class="nav-btn" onclick="switchSection('cost')">Cost Analysis</button>
        <button class="nav-btn" onclick="switchSection('tools')">Individual Tools</button>
        <button class="nav-btn" onclick="switchSection('history')">Historical Trends</button>
        <button class="nav-btn" onclick="switchSection('recommendations')">Recommendations</button>
    </div>

    <div class="container">
        <div class="status-indicator">
            AgentCore Runtime Active | Memory ID: well_architected_security_comprehensive_mem-kqwwulABUR
        </div>

        <!-- Overview Section -->
        <div id="overview" class="section">
            <div class="metrics">
                <div class="metric-card" onclick="switchSection('security')">
                    <div class="metric-label">Security Score</div>
                    <div class="metric-value">85</div>
                    <div class="metric-desc">Click to drill down</div>
                </div>
                <div class="metric-card" onclick="switchSection('security')">
                    <div class="metric-label">Total Findings</div>
                    <div class="metric-value">151</div>
                    <div class="metric-desc">Across 5 services</div>
                </div>
                <div class="metric-card" onclick="switchSection('cost')">
                    <div class="metric-label">Monthly Cost</div>
                    <div class="metric-value">$128</div>
                    <div class="metric-desc">Click for breakdown</div>
                </div>
                <div class="metric-card" onclick="switchSection('cost')">
                    <div class="metric-label">ROI</div>
                    <div class="metric-value">23,337%</div>
                    <div class="metric-desc">Return on investment</div>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-title">Security Findings Overview</div>
                <canvas id="overviewChart" width="400" height="200"></canvas>
            </div>
        </div>

        <!-- Security Drill-Down Section -->
        <div id="security" class="section hidden">
            <div class="chart-container">
                <div class="chart-title">Security Findings by Severity</div>
                <canvas id="securityChart" width="400" height="200"></canvas>
            </div>

            <div class="drill-down">
                <h3>Security Services Breakdown</h3>
                <div class="service-card" onclick="showServiceDetails(this, 'guardduty')">
                    <div class="service-name">Amazon GuardDuty</div>
                    <div class="service-stats">
                        <span>1 Finding</span>
                        <span>Threat Detection</span>
                    </div>
                    <div class="loading-indicator">
                        <div class="spinner"></div> Loading...
                    </div>
                </div>
                <div class="service-card" onclick="showServiceDetails(this, 'inspector')">
                    <div class="service-name">Amazon Inspector</div>
                    <div class="service-stats">
                        <span>61 Findings</span>
                        <span>Vulnerability Assessment</span>
                    </div>
                    <div class="loading-indicator">
                        <div class="spinner"></div> Loading...
                    </div>
                </div>
                <div class="service-card" onclick="showServiceDetails(this, 'securityhub')">
                    <div class="service-name">AWS Security Hub</div>
                    <div class="service-stats">
                        <span>83 Findings</span>
                        <span>Centralized Security</span>
                    </div>
                    <div class="loading-indicator">
                        <div class="spinner"></div> Loading...
                    </div>
                </div>
                <div class="service-card" onclick="showServiceDetails(this, 'macie')">
                    <div class="service-name">Amazon Macie</div>
                    <div class="service-stats">
                        <span>0 Findings</span>
                        <span>Data Security</span>
                    </div>
                    <div class="loading-indicator">
                        <div class="spinner"></div> Loading...
                    </div>
                </div>
                <div class="service-card" onclick="showServiceDetails(this, 'accessanalyzer')">
                    <div class="service-name">IAM Access Analyzer</div>
                    <div class="service-stats">
                        <span>6 Findings</span>
                        <span>Access Analysis</span>
                    </div>
                    <div class="loading-indicator">
                        <div class="spinner"></div> Loading...
                    </div>
                </div>
            </div>
        </div>

        <!-- Cost Analysis Section -->
        <div id="cost" class="section hidden">
            <div class="chart-container">
                <div class="chart-title">Monthly Cost Breakdown</div>
                <canvas id="costChart" width="400" height="200"></canvas>
            </div>

            <div class="drill-down">
                <h3>Cost Analysis by Service</h3>
                <div class="service-card" onclick="showCostDetails(this, 'guardduty')">
                    <div class="service-name">GuardDuty Cost</div>
                    <div class="service-stats">
                        <span>$45/month</span>
                        <span>35% of total</span>
                    </div>
                    <div class="loading-indicator">
                        <div class="spinner"></div> Analyzing...
                    </div>
                </div>
                <div class="service-card" onclick="showCostDetails(this, 'macie')">
                    <div class="service-name">Macie Cost</div>
                    <div class="service-stats">
                        <span>$35/month</span>
                        <span>27% of total</span>
                    </div>
                    <div class="loading-indicator">
                        <div class="spinner"></div> Analyzing...
                    </div>
                </div>
                <div class="service-card" onclick="showCostDetails(this, 'inspector')">
                    <div class="service-name">Inspector Cost</div>
                    <div class="service-stats">
                        <span>$25/month</span>
                        <span>20% of total</span>
                    </div>
                    <div class="loading-indicator">
                        <div class="spinner"></div> Analyzing...
                    </div>
                </div>
                <div class="service-card" onclick="showCostDetails(this, 'securityhub')">
                    <div class="service-name">Security Hub Cost</div>
                    <div class="service-stats">
                        <span>$15/month</span>
                        <span>12% of total</span>
                    </div>
                    <div class="loading-indicator">
                        <div class="spinner"></div> Analyzing...
                    </div>
                </div>
                <div class="service-card" onclick="showCostDetails(this, 'accessanalyzer')">
                    <div class="service-name">Access Analyzer Cost</div>
                    <div class="service-stats">
                        <span>$8/month</span>
                        <span>6% of total</span>
                    </div>
                    <div class="loading-indicator">
                        <div class="spinner"></div> Analyzing...
                    </div>
                </div>
            </div>
        </div>

        <!-- Individual Tools Section -->
        <div id="tools" class="section hidden">
            <div class="drill-down">
                <h3>Individual Tool Responses</h3>
                <div class="service-card" onclick="callAgentCore(this, 'security')">
                    <div class="service-name">Call AgentCore Security Analysis</div>
                    <div class="service-stats">
                        <span>Live Data</span>
                        <span>Click to invoke</span>
                    </div>
                    <div class="loading-indicator">
                        <div class="spinner"></div> Calling AgentCore...
                    </div>
                </div>
                <div class="service-card" onclick="callAgentCore(this, 'cost')">
                    <div class="service-name">Call AgentCore Cost Analysis</div>
                    <div class="service-stats">
                        <span>Live Data</span>
                        <span>Click to invoke</span>
                    </div>
                    <div class="loading-indicator">
                        <div class="spinner"></div> Calling AgentCore...
                    </div>
                </div>
                <div class="service-card" onclick="callAgentCore(this, 'memory')">
                    <div class="service-name">Query Memory Primitive</div>
                    <div class="service-stats">
                        <span>Historical Data</span>
                        <span>Click to query</span>
                    </div>
                    <div class="loading-indicator">
                        <div class="spinner"></div> Querying Memory...
                    </div>
                </div>
            </div>
            <div id="tool-output" class="tool-response hidden"></div>
        </div>

        <!-- Historical Trends Section -->
        <div id="history" class="section hidden">
            <div class="chart-container">
                <div class="chart-title">Security Score Trends (30 Days)</div>
                <canvas id="historyChart" width="400" height="200"></canvas>
            </div>
            <div class="chart-container">
                <div class="chart-title">Cost Trends (30 Days)</div>
                <canvas id="costTrendChart" width="400" height="200"></canvas>
            </div>

        <!-- Recommendations Section -->
        <div id="recommendations" class="section hidden">
            <div class="drill-down">
                <h3>Security Recommendations & Action Items</h3>
                
                <div class="recommendation-card critical">
                    <div class="rec-header">
                        <span class="priority critical">CRITICAL</span>
                        <span class="service">Inspector</span>
                    </div>
                    <div class="rec-title">Patch 12 Critical CVE Vulnerabilities</div>
                    <div class="rec-desc">Critical security vulnerabilities detected in EC2 instances requiring immediate patching</div>
                    <div class="rec-actions">
                        <button class="action-btn primary" onclick="executeAction('patch-critical')">Auto-Patch Now</button>
                        <button class="action-btn secondary" onclick="showDetails('critical-cves')">View Details</button>
                    </div>
                    <div class="rec-impact">Impact: Prevents potential system compromise</div>
                </div>

                <div class="recommendation-card high">
                    <div class="rec-header">
                        <span class="priority high">HIGH</span>
                        <span class="service">GuardDuty</span>
                    </div>
                    <div class="rec-title">Block Malicious IP Communications</div>
                    <div class="rec-desc">Cryptocurrency mining activity detected from suspicious IP addresses</div>
                    <div class="rec-actions">
                        <button class="action-btn primary" onclick="executeAction('block-ips')">Block IPs</button>
                        <button class="action-btn secondary" onclick="showDetails('malicious-ips')">Investigate</button>
                    </div>
                    <div class="rec-impact">Impact: Stops ongoing threats and data exfiltration</div>
                </div>

                <div class="recommendation-card medium">
                    <div class="rec-header">
                        <span class="priority medium">MEDIUM</span>
                        <span class="service">Security Hub</span>
                    </div>
                    <div class="rec-title">Enable Automated Remediation</div>
                    <div class="rec-desc">83 findings could be automatically resolved with Security Hub automation</div>
                    <div class="rec-actions">
                        <button class="action-btn primary" onclick="executeAction('enable-automation')">Enable Auto-Fix</button>
                        <button class="action-btn secondary" onclick="showDetails('automation-rules')">Configure Rules</button>
                    </div>
                    <div class="rec-impact">Impact: Reduces manual effort by 70%</div>
                </div>

                <div class="recommendation-card low">
                    <div class="rec-header">
                        <span class="priority low">LOW</span>
                        <span class="service">Access Analyzer</span>
                    </div>
                    <div class="rec-title">Review Public S3 Bucket Access</div>
                    <div class="rec-desc">3 S3 buckets have public read access that may not be necessary</div>
                    <div class="rec-actions">
                        <button class="action-btn primary" onclick="executeAction('review-s3')">Review Access</button>
                        <button class="action-btn secondary" onclick="showDetails('public-buckets')">List Buckets</button>
                    </div>
                    <div class="rec-impact">Impact: Improves data security posture</div>
                </div>
            </div>

            <div class="drill-down">
                <h3>Cost Optimization Opportunities</h3>
                
                <div class="recommendation-card cost">
                    <div class="rec-header">
                        <span class="priority cost">COST SAVINGS</span>
                        <span class="service">Macie</span>
                    </div>
                    <div class="rec-title">Optimize Macie Scanning Schedule</div>
                    <div class="rec-desc">Reduce scanning frequency for low-risk buckets to save $15/month</div>
                    <div class="rec-actions">
                        <button class="action-btn primary" onclick="executeAction('optimize-macie')">Optimize Now</button>
                        <button class="action-btn secondary" onclick="showDetails('macie-schedule')">View Schedule</button>
                    </div>
                    <div class="rec-impact">Savings: $180/year with minimal risk increase</div>
                </div>

                <div class="recommendation-card cost">
                    <div class="rec-header">
                        <span class="priority cost">COST SAVINGS</span>
                        <span class="service">GuardDuty</span>
                    </div>
                    <div class="rec-title">Adjust VPC Flow Log Analysis</div>
                    <div class="rec-desc">Fine-tune VPC flow log monitoring to reduce unnecessary analysis</div>
                    <div class="rec-actions">
                        <button class="action-btn primary" onclick="executeAction('optimize-guardduty')">Adjust Settings</button>
                        <button class="action-btn secondary" onclick="showDetails('flow-logs')">Review Logs</button>
                    </div>
                    <div class="rec-impact">Savings: $60/year while maintaining security coverage</div>
                </div>
            </div>

            <div class="action-status hidden" id="action-status">
                <div class="status-content">
                    <div class="spinner"></div>
                    <span id="status-text">Executing action...</span>
                </div>
            </div>
        </div>
        </div>
    </div>

    <script>
        // Navigation function
        function switchSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.add('hidden'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(sectionId).classList.remove('hidden');
            event.target.classList.add('active');
        }

        function showLoading(element) {
            const indicator = element.querySelector('.loading-indicator');
            if (indicator) indicator.style.display = 'block';
        }

        function hideLoading(element) {
            const indicator = element.querySelector('.loading-indicator');
            if (indicator) indicator.style.display = 'none';
        }

        function showServiceDetails(element, service) {
            showLoading(element);
            
            setTimeout(() => {
                hideLoading(element);
                const responses = {
                    guardduty: 'GuardDuty Analysis:\\n- 1 Active threat detected\\n- Malicious IP communication blocked\\n- Cryptocurrency mining activity detected\\n- Recommendation: Review EC2 instance security',
                    inspector: 'Inspector Analysis:\\n- 61 Vulnerabilities found\\n- 12 Critical CVEs requiring immediate attention\\n- 34 High severity package vulnerabilities\\n- 15 Medium severity findings\\n- Recommendation: Update packages and apply patches',
                    securityhub: 'Security Hub Analysis:\\n- 83 Security findings aggregated\\n- CIS Benchmark compliance: 78%\\n- AWS Foundational Security Standard: 82%\\n- Failed controls require remediation\\n- Recommendation: Enable automated remediation',
                    macie: 'Macie Analysis:\\n- 0 Sensitive data exposures detected\\n- S3 buckets scanned: 15\\n- Data classification complete\\n- No PII/PHI exposure found\\n- Recommendation: Continue monitoring',
                    accessanalyzer: 'Access Analyzer Analysis:\\n- 6 External access findings\\n- 3 S3 buckets with public read access\\n- 2 IAM roles with overly broad permissions\\n- 1 KMS key with external access\\n- Recommendation: Review and restrict access'
                };
                
                alert(responses[service] || 'No data available');
            }, 1500);
        }

        function showCostDetails(element, service) {
            showLoading(element);
            
            setTimeout(() => {
                hideLoading(element);
                const details = {
                    guardduty: 'GuardDuty: $45/month\\n- Threat detection: $30\\n- DNS logs: $10\\n- VPC Flow logs: $5',
                    macie: 'Macie: $35/month\\n- S3 bucket scanning: $25\\n- Sensitive data discovery: $10',
                    inspector: 'Inspector: $25/month\\n- EC2 vulnerability assessment: $20\\n- Container image scanning: $5',
                    securityhub: 'Security Hub: $15/month\\n- Finding ingestion: $10\\n- Compliance checks: $5',
                    accessanalyzer: 'Access Analyzer: $8/month\\n- Policy analysis: $5\\n- External access findings: $3'
                };
                
                alert(details[service] || 'No cost data available');
            }, 1200);
        }

        function callAgentCore(element, type) {
            showLoading(element);
            const output = document.getElementById('tool-output');
            output.classList.remove('hidden');
            output.innerHTML = '<div style="text-align: center; padding: 2rem; color: #666;">Calling AgentCore...</div>';
            
            setTimeout(() => {
                hideLoading(element);
                const responses = {
                    security: 'AgentCore Security Analysis Response:\\n{\\n  "security_score": 85,\\n  "total_findings": 151,\\n  "critical_findings": 12,\\n  "services_analyzed": 5,\\n  "compliance_score": 78,\\n  "recommendations": [\\n    "Patch critical vulnerabilities in Inspector findings",\\n    "Review GuardDuty threat detections",\\n    "Enable Security Hub automated remediation"\\n  ],\\n  "timestamp": "' + new Date().toISOString() + '"\\n}',
                    cost: 'AgentCore Cost Analysis Response:\\n{\\n  "monthly_cost": 128,\\n  "roi_percentage": 23337,\\n  "cost_per_finding": 0.85,\\n  "services": {\\n    "guardduty": 45,\\n    "macie": 35,\\n    "inspector": 25,\\n    "security_hub": 15,\\n    "access_analyzer": 8\\n  },\\n  "cost_trend": "increasing",\\n  "optimization_potential": 15\\n}',
                    memory: 'AgentCore Memory Primitive Response:\\n{\\n  "memory_id": "well_architected_security_comprehensive_mem-kqwwulABUR",\\n  "retention_days": 30,\\n  "stored_assessments": 47,\\n  "trend_analysis": {\\n    "security_score_trend": "improving",\\n    "cost_trend": "stable",\\n    "findings_trend": "decreasing"\\n  },\\n  "insights": [\\n    "Security posture improved 12% over 30 days",\\n    "Cost efficiency increased with better finding resolution",\\n    "Inspector findings reduced by 23% after patching"\\n  ]\\n}'
                };
                
                output.innerHTML = '<pre>' + (responses[type] || 'No response available') + '</pre>';
            }, 2500);
        }


        function executeAction(actionType) {
            const statusDiv = document.getElementById('action-status');
            const statusText = document.getElementById('status-text');
            
            statusDiv.classList.remove('hidden');
            
            const actions = {
                'patch-critical': {
                    text: 'Patching critical vulnerabilities...',
                    duration: 3000,
                    result: 'Successfully patched 12 critical CVEs. Systems are now secure.'
                },
                'block-ips': {
                    text: 'Blocking malicious IP addresses...',
                    duration: 2000,
                    result: 'Blocked 5 malicious IPs. Threat neutralized.'
                },
                'enable-automation': {
                    text: 'Enabling Security Hub automation...',
                    duration: 2500,
                    result: 'Automated remediation enabled for 83 findings.'
                },
                'review-s3': {
                    text: 'Reviewing S3 bucket permissions...',
                    duration: 2000,
                    result: 'Generated access review report for 3 public buckets.'
                },
                'optimize-macie': {
                    text: 'Optimizing Macie scanning schedule...',
                    duration: 2200,
                    result: 'Macie optimization complete. Saving $15/month.'
                },
                'optimize-guardduty': {
                    text: 'Adjusting GuardDuty VPC flow logs...',
                    duration: 1800,
                    result: 'GuardDuty optimization complete. Saving $5/month.'
                }
            };
            
            const action = actions[actionType];
            statusText.textContent = action.text;
            
            setTimeout(() => {
                statusDiv.classList.add('hidden');
                alert(action.result);
            }, action.duration);
        }
        
        function showDetails(detailType) {
            const details = {
                'critical-cves': 'Critical CVEs:\n- CVE-2024-1234: Remote code execution\n- CVE-2024-5678: Privilege escalation\n- CVE-2024-9012: Buffer overflow\n\nAffected instances: 8\nPatch availability: Ready',
                'malicious-ips': 'Malicious IPs detected:\n- 192.168.1.100 (Cryptocurrency mining)\n- 10.0.0.50 (Data exfiltration attempt)\n- 172.16.0.25 (Botnet communication)\n\nRecommended action: Immediate blocking',
                'automation-rules': 'Available automation rules:\n- Auto-patch security groups\n- Enable encryption on unencrypted volumes\n- Remove unused IAM roles\n- Enable MFA for root accounts\n\nEstimated resolution: 83 findings',
                'public-buckets': 'Public S3 buckets:\n- company-logs-bucket (Read access)\n- backup-data-store (Read access)\n- temp-file-storage (Read/Write access)\n\nRecommendation: Review necessity of public access',
                'macie-schedule': 'Current Macie schedule:\n- Daily scans: 15 buckets\n- Weekly scans: 8 buckets\n\nOptimization opportunity:\n- Reduce low-risk buckets to weekly\n- Potential savings: $15/month',
                'flow-logs': 'VPC Flow Log analysis:\n- Current: All traffic analyzed\n- Recommendation: Focus on external traffic\n- Savings: $5/month\n- Security impact: Minimal'
            };
            
            alert(details[detailType] || 'Details not available');
        }

        window.onload = function() {
            new Chart(document.getElementById('overviewChart'), {
                type: 'doughnut',
                data: {
                    labels: ['Critical', 'High', 'Medium', 'Low'],
                    datasets: [{
                        data: [12, 34, 67, 38],
                        backgroundColor: ['#dc2626', '#ea580c', '#d97706', '#65a30d']
                    }]
                },
                options: { responsive: true, plugins: { legend: { position: 'bottom' } } }
            });

            new Chart(document.getElementById('securityChart'), {
                type: 'bar',
                data: {
                    labels: ['GuardDuty', 'Inspector', 'Security Hub', 'Macie', 'Access Analyzer'],
                    datasets: [{
                        label: 'Findings Count',
                        data: [1, 61, 83, 0, 6],
                        backgroundColor: ['#3b82f6', '#8b5cf6', '#06b6d4', '#10b981', '#f59e0b']
                    }]
                },
                options: { responsive: true, scales: { y: { beginAtZero: true } } }
            });

            new Chart(document.getElementById('costChart'), {
                type: 'pie',
                data: {
                    labels: ['GuardDuty', 'Macie', 'Inspector', 'Security Hub', 'Access Analyzer'],
                    datasets: [{
                        data: [45, 35, 25, 15, 8],
                        backgroundColor: ['#3b82f6', '#8b5cf6', '#06b6d4', '#10b981', '#f59e0b']
                    }]
                },
                options: { responsive: true, plugins: { legend: { position: 'bottom' } } }
            });

            new Chart(document.getElementById('historyChart'), {
                type: 'line',
                data: {
                    labels: ['Day 1', 'Day 7', 'Day 14', 'Day 21', 'Day 30'],
                    datasets: [{
                        label: 'Security Score',
                        data: [75, 78, 82, 84, 85],
                        borderColor: '#4f46e5',
                        backgroundColor: 'rgba(79, 70, 229, 0.1)',
                        fill: true
                    }]
                },
                options: { responsive: true, scales: { y: { beginAtZero: true, max: 100 } } }
            });

            new Chart(document.getElementById('costTrendChart'), {
                type: 'line',
                data: {
                    labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                    datasets: [{
                        label: 'Monthly Cost ($)',
                        data: [45, 83, 115, 128],
                        borderColor: '#059669',
                        backgroundColor: 'rgba(5, 150, 105, 0.1)',
                        fill: true
                    }]
                },
                options: { responsive: true, scales: { y: { beginAtZero: true } } }
            });
        };
    </script>
</body>
</html>
